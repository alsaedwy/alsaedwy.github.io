<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Alaa Saeed</title>
  <!-- Include relevant CSS from index.html if needed, or adapt styles -->
  <link rel="stylesheet" href="assets/css/main.css" /> <!-- Added from index.html for article styling -->
  <!-- Add Bootstrap Icons CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript> <!-- Added from index.html -->
  <style>
    html, body {
        height: 100%; /* Ensure body takes full height */
        margin: 0;
    }
    body {
      background: #0d0d0d;
      color: #d4d4d4;
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      padding: 1rem; /* Add padding for smaller screens */
      /* Keep slide transitions */
      overflow-x: hidden;
      transition: transform 0.5s ease-out, opacity 0.5s ease-out;
      transform: translateX(0);
      opacity: 1;
      min-height: 100vh; /* Ensure body takes at least full viewport height */
      box-sizing: border-box; /* Include padding in height calculation */
    }
    body.is-preload *, body.is-preload *:before, body.is-preload *:after {
        -moz-animation: none !important;
        -webkit-animation: none !important;
        -ms-animation: none !important;
        animation: none !important;
        -moz-transition: none !important;
        -webkit-transition: none !important;
        -ms-transition: none !important;
        transition: none !important;
    }
    body.fade-out {
        opacity: 0; /* Fade out effect */
    }
    #floating-box {
      /* Responsive width and centering */
      width: 90%; /* Use percentage width */
      max-width: 700px; /* Keep max-width for larger screens */
      margin: 2rem auto; /* Center horizontally and add vertical margin */

      /* Keep appearance styles */
      padding: 1rem;
      border-radius: 0.5rem;
      border-top: 1px solid #666;
      border-bottom: 1px solid #666;
      max-height: 85vh; /* Adjust max-height */
      overflow-y: auto;
      background: #0d0d0d; /* Match body or use desired background */

      /* Keep initial animation styles */
      opacity: 0;
      transform: translateX(20px); /* Keep initial transform for entry animation */
      transition: opacity 0.65s ease-out 0.5s, transform 0.65s ease-out 0.5s;
      will-change: opacity, transform;
    }
    body:not(.is-preload) #floating-box {
        opacity: 1;
        transform: translateX(0); /* Animate to final position */
    }
    #floating-box h1 {
      font-size: 1.5rem; /* Adjust base size */
      text-align: center;
      color: #ffffff;
      margin-bottom: 0.2em;
    }
    #floating-box h2 {
      font-size: 1rem; /* Adjust base size */
      color: #00ff88;
      text-align: left;
      margin: 0 0 1rem;
      letter-spacing: normal;
    }
    ul.tree, ul.subtree {
      list-style: none;
      padding-left: 0.8rem; /* Adjust padding */
      position: relative;
      margin: 0;
    }
    ul.tree::before, ul.subtree::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      border-left: 1px dashed #666;
    }
    .node {
      cursor: pointer;
      margin: 0.3rem 0;
      position: relative;
      padding-left: 2rem; /* Adjust padding */
      transition: color 0.3s;
      font-size: 1rem; /* Adjust base size */
      color: #b0b0b0;
    }
    .node:hover {
        color: #00ff88;
    }
    .node.active-node {
        color: #ffffff;
    }
    .node.active-node:hover {
        color: #00ff88;
    }
    .node::before {
      content: "├──  ";
      color: #888;
      position: absolute;
      left: 0;
    }
    ul.tree > li:last-child > .node::before,
    ul.subtree > li:last-child > .node::before {
      content: "└──  ";
    }
    .content {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateY(-8px);
      transition: max-height 1.2s cubic-bezier(0.645, 0.045, 0.355, 1), 
                  opacity 1s ease-out, 
                  transform 1s ease-out;
      padding-left: 1rem; /* Adjust padding */
      will-change: max-height, opacity, transform;
      font-size: 1rem; /* Adjust base size */
    }
    .content.visible {
      max-height: 1500px;
      opacity: 1;
      transform: translateY(0);
    }
    .content p, .content li {
        font-size: 1rem; /* Adjust base size */
        color: #b0b0b0;
        transition: color 0.3s;
    }
    .content a {
        font-size: 1rem; /* Adjust base size */
        color: #00aaff;
        text-decoration: none;
        transition: color 0.3s;
    }
    .node.active-node + .content p,
    .node.active-node + .content li,
    .node.active-node + .content .node,
    .node.active-node + .content .node a {
        color: #ffffff;
    }
    .node.active-node + .content .node::before {
        color: #aaa;
    }
    .node.active-node + .content a {
        color: #33d6ff;
    }
    a {
      color: #00ccff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .social-links {
        margin-top: 1rem;
        padding-top: 0.8rem;
        border-top: 1px dashed #666;
    }
    .social-links ul {
        display: flex;
        justify-content: center;
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .social-links ul li {
        padding: 0 0.5em; /* Adjust padding */
    }
    .social-links ul li a {
        color: #777;
        text-decoration: none;
        font-size: 1.1rem; /* Adjust size */
        transition: color 0.2s ease-in-out;
    }
    .social-links ul li a:hover {
        color: #00ff88;
        text-decoration: none;
    }
    .social-links ul li a .label {
        display: none;
    }

    /* Add color for lastfm icon if desired */
    .fa-lastfm { color: #d51007; } /* Last.fm red */
    .fa-lastfm:hover { color: #b30c05; } /* Darker red on hover */

    /* Style for Bootstrap Substack icon */
    .bi-substack {
        color: inherit; /* Inherit default link color (#777) */
        font-size: 1.1rem; /* Match other icons */
        vertical-align: -0.1em; /* Fine-tune vertical alignment */
        transition: color 0.2s ease-in-out; /* Add transition */
    }
    /* Hover effect for Bootstrap Substack icon */
    .social-links ul li a:hover .bi-substack {
        color: #FF6719; /* Substack orange on hover */
    }

    /* Style for Mastodon icon */
    .fa-mastodon { color: #6364FF; } /* Mastodon purple */
    .fa-mastodon:hover { color: #5354D4; } /* Darker purple on hover */

    /* --- Media Queries for Responsiveness --- */

    /* Medium screens (tablets) */
    @media (min-width: 768px) {
        #floating-box {
            padding: 1.5rem; /* Increase padding */
        }
        #floating-box h1 { font-size: 1.8rem; }
        #floating-box h2 { font-size: 1.1rem; }
        .node { font-size: 1.1rem; padding-left: 2.2rem; }
        .content { font-size: 1.1rem; padding-left: 1.2rem; }
        .content p, .content li, .content a { font-size: 1.1rem; }
        .social-links ul li { padding: 0 0.6em; }
        .social-links ul li a { font-size: 1.2rem; }
        .bi-substack { font-size: 1.2rem; } /* Adjust size for medium screens */
    }

    /* Large screens (desktops) */
    @media (min-width: 1024px) {
        body {
            padding: 2rem; /* More padding on large screens */
        }
        #floating-box {
            padding: 2rem;
        }
        #floating-box h1 { font-size: 2rem; }
        #floating-box h2 { font-size: 1.2rem; }
        ul.tree, ul.subtree { padding-left: 1rem; }
        .node { font-size: 1.2rem; padding-left: 2.5rem; }
        .content { font-size: 1.2rem; padding-left: 1.5rem; }
        .content p, .content li, .content a { font-size: 1.2rem; }
        .social-links ul li { padding: 0 0.75em; }
        .social-links ul li a { font-size: 1.3rem; }
        .bi-substack { font-size: 1.3rem; } /* Adjust size for large screens */
    }

  </style>
</head>
<body class="is-preload slide-init-left">

<!-- Floating tree menu -->
<div id="floating-box">
  <h1>Alaa Saeed</h1>
  <h2>~/alaa.sh</h2>
  <ul class="tree">
    <li>
      <div class="node" onclick="toggle(this)">about</div>
      <div class="content">
        <p>A software engineer that's passionate about tech, art, nature and what's in between.</p>
      </div>
    </li>
    <li>
      <div class="node" onclick="toggle(this)">resume</div>
    </li>
    <li>
      <div class="node" onclick="toggle(this)">contact</div>
      <div class="content">
        <ul>
          <li>Email: <a href="mailto:alsaedwy@pm.me">alsaedwy@pm.me</a></li>
        </ul>
      </div>
    </li>
  </ul>

  <!-- Social Links Section -->
  <div class="social-links">
      <ul>
          <li><a href="https://twitter.com/alsaedwy" class="icon brands fa-twitter" target="_blank"><span class="label">Twitter</span></a></li>
          <li><a href="https://github.com/alsaedwy" class="icon brands fa-github" target="_blank"><span class="label">GitHub</span></a></li>
          <li><a href="https://gitlab.com/alaa.saeed" class="icon brands fa-gitlab" target="_blank"><span class="label">GitHub</span></a></li>
          <li><a href="https://linkedin.com/in/alsaedwy" class="icon brands fa-linkedin" target="_blank"><span class="label">LinkedIn</span></a></li>
          <li><a href="https://www.instagram.com/alsaedwy/" class="icon brands fa-instagram" target="_blank"><span class="label">Instagram</span></a></li>
          <li><a href="https://www.last.fm/user/alsaedwy" class="icon brands fa-lastfm" target="_blank"><span class="label">Last.fm</span></a></li>
          <li>
            <a href="https://alsaedwy.substack.com/" class="icon brands" target="_blank">
              <i class="bi bi-substack"></i>
              <span class="label">Substack</span>
            </a>
          </li>
          <li><a href="https://mastodon.social/@alsaedwy" class="icon brands fa-mastodon" target="_blank"><span class="label">Mastodon</span></a></li>
      </ul>
  </div>

</div>

<script>
  function navigateToPage(url) {
    document.body.classList.add('fade-out');
    setTimeout(() => {
      window.location.href = url;
    }, 500);
  }

  function toggle(node) {
    // Handle navigation for 'resume' node
    if (node.textContent.trim().toLowerCase() === 'resume') {
        navigateToPage('cv.html');
        return; // Stop further execution for resume node
    }

    const content = node.nextElementSibling;
    if (!content || !content.classList.contains('content')) {
        const parentLi = node.parentElement;
        const parentUl = parentLi.parentElement;
        const siblings = Array.from(parentUl.children);
        const wasActive = node.classList.contains('active-node');

        siblings.forEach(li => {
            const siblingNode = li.querySelector(':scope > .node');
            if (siblingNode && siblingNode !== node) {
                siblingNode.classList.remove('active-node');
                const siblingContent = siblingNode.nextElementSibling;
                if (siblingContent && siblingContent.classList.contains('content')) {
                    siblingContent.classList.remove('visible');
                    const nestedNodes = siblingContent.querySelectorAll('.node.active-node');
                    nestedNodes.forEach(nn => nn.classList.remove('active-node'));
                    const nestedContents = siblingContent.querySelectorAll('.content.visible');
                    nestedContents.forEach(nc => nc.classList.remove('visible'));
                }
            }
        });

        if (!wasActive) {
            node.classList.add('active-node');
        } else {
            node.classList.remove('active-node');
        }
        return;
    }

    const parentLi = node.parentElement;
    const parentUl = parentLi.parentElement;
    const wasVisible = content.classList.contains('visible');

    const siblings = Array.from(parentUl.children);
    siblings.forEach(li => {
        const siblingNode = li.querySelector(':scope > .node');
        const siblingContent = li.querySelector(':scope > .content');

        if (li !== parentLi) {
            if (siblingNode) {
                siblingNode.classList.remove('active-node');
            }
            if (siblingContent) {
                siblingContent.classList.remove('visible');
                const nestedNodes = siblingContent.querySelectorAll('.node.active-node');
                nestedNodes.forEach(nn => nn.classList.remove('active-node'));
                const nestedContents = siblingContent.querySelectorAll('.content.visible');
                nestedContents.forEach(nc => nc.classList.remove('visible'));
            }
        }
    });

    if (!wasVisible) {
        content.classList.add('visible');
        node.classList.add('active-node');
    } else {
        content.classList.remove('visible');
        node.classList.remove('active-node');
        const nestedNodes = content.querySelectorAll('.node.active-node');
        nestedNodes.forEach(nn => nn.classList.remove('active-node'));
        const nestedContents = content.querySelectorAll('.content.visible');
        nestedContents.forEach(nc => nc.classList.remove('visible'));
    }
  }

  window.addEventListener('load', function() {
    document.body.classList.remove('is-preload');

    setTimeout(() => {
        document.body.classList.remove('slide-init-left');
        document.body.classList.add('is-visible');
    }, 50); // Small delay for transition

    const hash = window.location.hash.substring(1);

    if (hash) {
        const pathSegments = hash.split('/');
        let currentLevelElement = document.querySelector('#floating-box > ul.tree');
        let nodeToActivate = null;

        const findNodeInLevel = (segment, levelElement) => {
            if (!levelElement) return null;
            const childNodes = Array.from(levelElement.querySelectorAll(':scope > li > .node'));
            return childNodes.find(node => {
                let nodeText = node.textContent.trim();
                if (nodeText.includes('Download CV')) nodeText = 'Download CV';
                else nodeText = nodeText.split(' ')[0].toLowerCase();
                return nodeText === segment;
            });
        };

        pathSegments.forEach((segment, index) => {
            nodeToActivate = findNodeInLevel(segment, currentLevelElement);

            if (nodeToActivate) {
                if (segment === 'resume' && pathSegments.length === 1) {
                     setTimeout(() => {
                        if (!nodeToActivate.classList.contains('active-node')) {
                             toggle(nodeToActivate);
                        }
                     }, index * 50);
                     currentLevelElement = null;
                     return;
                }

                setTimeout(() => {
                    const content = nodeToActivate.nextElementSibling;
                    if (content && content.classList.contains('content')) {
                        if (!content.classList.contains('visible')) {
                            toggle(nodeToActivate);
                        } else if (!nodeToActivate.classList.contains('active-node')) {
                            nodeToActivate.classList.add('active-node');
                        }
                    } else {
                        if (!nodeToActivate.classList.contains('active-node')) {
                             toggle(nodeToActivate);
                        }
                    }
                }, 100 + index * 50); // Increased base delay

                const nextContent = nodeToActivate.nextElementSibling;
                if (nextContent && nextContent.classList.contains('content')) {
                    currentLevelElement = nextContent.querySelector('ul.subtree');
                } else {
                    currentLevelElement = null;
                }
            } else {
                console.warn(`Node segment "${segment}" not found.`);
                currentLevelElement = null;
            }
        });

    } else {
        const aboutNode = Array.from(document.querySelectorAll('#floating-box .node')).find(el => el.textContent.trim() === 'about');
        if (aboutNode) {
            setTimeout(() => {
                if (!aboutNode.classList.contains('active-node')) {
                    toggle(aboutNode);
                } else {
                    const content = aboutNode.nextElementSibling;
                    if (content && !content.classList.contains('visible')) {
                        content.classList.add('visible');
                    }
                }
            }, 700); // Adjusted delay
        }
    }
  });

</script>

</body>
</html>
